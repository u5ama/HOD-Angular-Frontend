<app-widget-loader *ngIf="phoneLoader"></app-widget-loader>
  <div class="card-body text-center" *ngIf="buttonBox">
    <div class="card-success-alert margin-from-top">
      <div class="card-button">
        <button class="btn btn-info connect-ctm" data-toggle="modal" data-target="#connect-ctm">Connect Call Tracking</button>
      </div>
    </div>
  </div>
  <div class="card-body p-0 overflow-hidden" *ngIf="recordBox">
    <div class="grid">
      <section class="svg-section">
        <svg class="circle-chart w-100 h-100" viewBox="0 0 33.83098862 33.83098862" width="120" height="120"
             xmlns="http://www.w3.org/2000/svg" style="border-radius: 100px;">
          <circle class="circle-chart__background" stroke="#E5E5E5" stroke-width="2.5" fill="none"
                  cx="16.91549431" cy="16.91549431" r="15.91549431" style="/* display: none; */"></circle>
          <circle class="circle-chart__circle" stroke="#00cf00" stroke-width="2.5"
                  stroke-dasharray="100,100" stroke-linecap="round" fill="none" cx="16.91549431"
                  cy="16.91549431" r="15.91549431"></circle>
        </svg>
        <div class="svg-inner">
          <img src="assets/media/svg-inner-2.jpg">
          <h3>{{allCalls}}</h3>
          <p>Calls</p>
        </div>
      </section>

      <div class="row circle-info">
        <div class="text-center w-100">
          <div class="circle-small blue-circle mr-2"></div>
          <span class="text-muted">Phone Calls: </span>
          <span>{{allCalls}}</span>
        </div>
      </div>
    </div>
  </div>


<!-- Connect CTM Modal -->
<div class="modal fade" id="connect-ctm" role="dialog">
  <div class="modal-dialog modal-dialog-centered modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">User Credentials</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <form class="bg-white px-4 pb-1 form-signin validate-me" [formGroup]="submitCTMForm" autocomplete="off">
          <div class="alert alert-danger" role="alert" *ngIf="alertError">
            {{errorContent}}
          </div>
        <div class="form-group">
          <label for="eml">Email:</label>
          <input type="email" class="form-control" id="eml" formControlName="userEmail" placeholder="Enter Email">
          <mat-error *ngIf="isControlHasError('userEmail','required')">
            <strong>Required* </strong>
          </mat-error>
          <mat-error *ngIf="isControlHasError('userEmail','email')">
            <strong>invalid field </strong>
          </mat-error>
          <mat-error *ngIf="isControlHasError('userEmail','minlength')">
            <strong> minimum field length is 3</strong>
          </mat-error>
          <mat-error *ngIf="isControlHasError('userEmail','maxlength')">
            <strong> maximum field length is 320</strong>
          </mat-error>
          <span class="help-block hide-me"><small></small></span>
        </div>
        <div class="form-group">
          <label for="pass">Password:</label>
          <input type="password" class="form-control" id="pass" formControlName="userPassword" placeholder="Enter Password">
          <mat-error *ngIf="isControlHasError('userPassword','required')">
            <strong>Required* </strong>
          </mat-error>
          <mat-error *ngIf="isControlHasError('userPassword','email')">
            <strong>invalid field </strong>
          </mat-error>
          <mat-error *ngIf="isControlHasError('userPassword','minlength')">
            <strong> minimum field length is 3</strong>
          </mat-error>
          <mat-error *ngIf="isControlHasError('userPassword','maxlength')">
            <strong> maximum field length is 320</strong>
          </mat-error>
          <span class="help-block hide-me"><small></small></span>
        </div>
        <div class="text-right">
          <button type="button" class="btn btn-info login-button" (click)="submitForm()">Login</button>
        </div>
        </form>
      </div>
    </div>
  </div>
</div>

<button type="button" class="btn" data-toggle="modal" data-target="#myNewCTMModel" id="openModal" #myNewCTMModel [hidden]="true"></button>
<div class="modal fade" id="myNewCTMModel" role="dialog" data-toggle="modal" data-target="#myNewCTMModel">
  <div class="modal-dialog modal-dialog-centered modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Select Call Metrices Account</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body modal-padding">
        <div class="page-panel selected-page" *ngFor="let account of accounts">
          <div class="row">
            <div class="col-10">
              <div class="box">
                <img class="mr-2" src="assets/media/website.png">
                <span style="">{{account.name}}</span>
              </div>
            </div>
            <div class="col-2">
              <div class="add-icon mar-top">
                <a href="javascript:void(0);" class="add-me" (click)="getAccount(account.id, account.name)"><i class="fa fa-plus"></i></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
